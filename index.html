<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manipulation as in Simulation: Enabling Accurate Geometry Perception in Robots</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Optimized Three.js for point cloud visualization -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/PLYLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stats.js@0.17.0/build/stats.min.js"></script>
    
    <!-- Plotly.js basic bundle for faster loading (only includes scatter plots) -->
    <script src="https://cdn.plot.ly/plotly-basic-2.27.0.min.js"></script>
</head>
<body>
    <header>
        <div class="logo-container">
            <a href="https://seed.bytedance.com/en/" target="_blank" class="logo-link">
                <img src="seed/seed_logo.png" alt="ByteDance Seed" class="bytedance-seed-logo">
            </a>
        </div>
        <div class="container">
            <div class="header-content">
                <h1 class="title">Manipulation as in Simulation:<br>Enabling Accurate Geometry Perception in Robots</h1>
            
            <div class="authors">
                <div class="author-row">
                    <span class="author"><a href="https://minghuanliu.com" target="_blank">Minghuan Liu</a><sup>1,*,‚Ä†</sup></span>
                    <span class="author"><a href="https://zbzhu99.github.io/" target="_blank">Zhengbang Zhu</a><sup>1,2,*</sup></span>
                    <span class="author"><a href="https://scholar.google.com/citations?user=Mo8I5WMAAAAJ/" target="_blank">Xiaoshen Han</a><sup>1,2,*</sup></span>
                    <span class="author">Peng Hu<sup>1,*</sup></span>
                    <span class="author"><a href="https://haotongl.github.io/" target="_blank">Haotong Lin</a><sup>1</sup></span>
                    <span class="author">Xinyao Li<sup>2</sup></span>
                </div>
                <div class="author-row">
                    <span class="author"><a href="https://timerchen.github.io/" target="_blank">Jingxiao Chen</a><sup>1,2</sup></span>
                    <span class="author"><a href="https://scholar.google.com/citations?user=GPmUxtIAAAAJ" target="_blank">Jiafeng Xu</a><sup>1</sup></span>
                    <span class="author"><a href="https://yangyichu.github.io/" target="_blank">Yichu Yang</a><sup>1</sup></span>
                    <span class="author"><a href="https://scholar.google.com/citations?user=0ar3JNYAAAAJ" target="_blank">Yunfeng Lin</a><sup>2</sup></span>
                    <span class="author"><a href="https://scholar.google.com/citations?user=laOWyTQAAAAJ" target="_blank">Xinghang Li</a><sup>3</sup></span>
                </div>
                <div class="author-row">
                    <span class="author"><a href="https://scholar.google.com/citations?user=-84M1m0AAAAJ" target="_blank">Yong Yu</a><sup>2</sup></span>
                    <span class="author"><a href="http://wnzhang.net/" target="_blank">Weinan Zhang</a><sup>2</sup></span>
                    <span class="author"><a href="https://www.taokong.org/" target="_blank">Tao Kong</a><sup>1</sup></span>
                    <span class="author"><a href="https://bingykang.github.io/" target="_blank">Bingyi Kang</a><sup>1,‚Ä†</sup></span>
                </div>
            </div>
            
            <div class="affiliations">
                <div class="affiliation"><sup>1</sup>ByteDance Seed</div>
                <div class="affiliation"><sup>2</sup>Shanghai Jiao Tong University</div>
                <div class="affiliation"><sup>3</sup>Tsinghua University</div>
            </div>
            
            <div class="notes">
                <p><sup>*</sup>Equal Contribution &nbsp;&nbsp; <sup>‚Ä†</sup>Corresponding Authors</p>
                <p>Minghuan did this work when he was at ByteDance Seed.</p>
            </div>
            
            <div class="contributions-compact">
                <div class="contribution-compact">
                    <div class="contribution-icon">üìä</div>
                    <div class="contribution-text">
                        <h4>ByteDepth Dataset</h4>
                        <p>170K+ RGB-depth pairs from 7 cameras</p>
                    </div>
                </div>
                <div class="contribution-compact">
                    <div class="contribution-icon">üîß</div>
                    <div class="contribution-text">
                        <h4>Camera Depth Models</h4>
                        <p>Plug-in solution for accurate depth perception</p>
                    </div>
                </div>
                <div class="contribution-compact">
                    <div class="contribution-icon">üöÄ</div>
                    <div class="contribution-text">
                        <h4>Sim-to-Real Transfer</h4>
                        <p>First depth-only policy with seamless transfer</p>
                    </div>
                </div>
            </div>
            
            <div class="links">
                <a href="#" class="btn"><i class="fas fa-file-pdf"></i> Paper</a>
                <a href="https://github.com/manipulation-as-in-simulation" class="btn"><i class="fab fa-github"></i> Code</a>
                <a href="#dataset" class="btn"><i class="fas fa-database"></i> Dataset</a>
                <a href="#models" class="btn"><i class="fas fa-cube"></i> Models</a>
            </div>
            </div>
        </div>
    </header>

    <section id="models" class="models">
        <div class="container">
            <h2>Available Camera Depth Models</h2>
            <p>We release camera depth models for various widely-used depth cameras:</p>
            
            <div class="model-grid">
                <div class="model-card">
                    <h3>CDM-435</h3>
                    <p>For RealSense D435 camera</p>
                    <a href="#" class="btn-download"><i class="fas fa-download"></i> Download</a>
                </div>
                <div class="model-card">
                    <h3>CDM-L515</h3>
                    <p>For RealSense L515 camera</p>
                    <a href="#" class="btn-download"><i class="fas fa-download"></i> Download</a>
                </div>
                <div class="model-card">
                    <h3>CDM-Kinect</h3>
                    <p>For Azure Kinect camera</p>
                    <a href="#" class="btn-download"><i class="fas fa-download"></i> Download</a>
                </div>
                <div class="model-card">
                    <h3>CDM-Zed2i Neural</h3>
                    <p>For Zed2i camera, Neural mode</p>
                    <a href="#" class="btn-download"><i class="fas fa-download"></i> Download</a>
                </div>
                <div class="model-card">
                    <h3>CDM-Zed2i Performance</h3>
                    <p>For Zed2i camera, Performance mode</p>
                    <a href="#" class="btn-download"><i class="fas fa-download"></i> Download</a>
                </div>
            </div>
        </div>
    </section>

    <section class="video">
        <div class="container">
            <h2>Video Overview</h2>
            <div class="video-container">
                <iframe width="100%" height="500" src="https://www.youtube.com/embed/VIDEO_ID" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </section>

    <section class="abstract">
        <div class="container">
            <h2>Abstract</h2>
            <img src="figs/teaser.png" alt="Teaser Figure" class="teaser-image">
            <p>
                Modern robotic manipulation primarily relies on visual observations in a 2D color space for skill learning, but suffers from poor generalization. In contrast, humans, living in a 3D world, depend more on physical properties‚Äîsuch as distance, size, and shape‚Äîthan on texture when interacting with objects. Since such 3D geometric information can be acquired from widely available depth cameras, it appears feasible to endow robots with similar perceptual capabilities.
                Our pilot study found that using depth cameras for manipulation is challenging, primarily due to their limited accuracy and susceptibility to various types of noise. In this work, we propose <strong>Camera Depth Models (CDMs)</strong> as a simple plugin on daily-use depth cameras, which take RGB images and raw depth signals as input and output denoised, accurate metric depth.
                To achieve this, we develop a neural data engine that generates high-quality paired data from simulation by modeling a depth camera's noise pattern. Our results show that CDMs achieve nearly simulation-level accuracy in depth prediction, effectively bridging the sim-to-real gap for manipulation tasks. Notably, our experiments demonstrate, <strong>for the first time</strong>, that a depth-only policy trained exclusively in simulation generalizes seamlessly to real robots on two long-horizon tasks, with little to no performance degradation.
                Further analysis reveals that sim-to-real success rates are strongly correlated with the quality of depth perception. We hope our findings will inspire future research in utilizing simulation data and 3D information in general robot policies.
            </p>
        </div>
    </section>


    <section id="dataset" class="dataset">
        <div class="container">
            <h2>ByteDepth Dataset</h2>
            <p>We introduce ByteDepth, a real-world multi-camera depth dataset comprising over <strong>170,000 RGB-depth pairs</strong> from ten distinct configurations captured by seven depth cameras.</p>
            
            <div class="dataset-stats">
                <div class="stat-item">
                    <h3>170K+</h3>
                    <p>RGB-Depth Pairs</p>
                </div>
                <div class="stat-item">
                    <h3>7</h3>
                    <p>Depth Cameras</p>
                </div>
                <div class="stat-item">
                    <h3>10</h3>
                    <p>Configurations</p>
                </div>
            </div>
            
            <div class="dataset-images">
                <img src="figs/dataset_depth.png" alt="Dataset Examples">
            </div>
        </div>
    </section>

    <section class="results">
        <div class="container">
            <h2>Key Results</h2>
            
            <div class="result-section">
                <h3>Depth Quality Comparison</h3>
                <div class="comparison-full">
                    <h4>Kitchen Scene</h4>
                    <div class="image-row-6">
                        <div class="image-item">
                            <img src="figs/compare_depths/microwave_435/output_ep000_camera_0_rgb_frame10.png" alt="RGB">
                            <p>RGB Image</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/microwave_435/output_ep000_camera_0_depth_frame10.png" alt="Raw Depth">
                            <p>Raw Depth</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/microwave_435/output_ep000_camera_0_model_depth_frame10.png" alt="CDM Depth">
                            <p>CDM-435 Output</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/microwave_515/output_ep000_camera_0_rgb_frame10.png" alt="RGB">
                            <p>RGB Image</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/microwave_515/output_ep000_camera_0_depth_frame10.png" alt="Raw Depth">
                            <p>Raw Depth</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/microwave_515/output_ep000_camera_0_model_depth_frame10.png" alt="CDM Depth">
                            <p>CDM-L515 Output</p>
                        </div>
                    </div>
                    
                    <h4>Canteen Scene</h4>
                    <div class="image-row-6">
                        <div class="image-item">
                            <img src="figs/compare_depths/canteen_435/output_ep000_camera_0_rgb_frame10.png" alt="RGB">
                            <p>RGB Image (D435)</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/canteen_435/output_ep000_camera_0_depth_frame10.png" alt="Raw Depth">
                            <p>Raw Depth (D435)</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/canteen_435/output_ep000_camera_0_model_depth_frame10.png" alt="CDM Depth">
                            <p>CDM-435 Output</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/canteen_515/output_ep000_camera_0_rgb_frame10.png" alt="RGB">
                            <p>RGB Image (L515)</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/canteen_515/output_ep000_camera_0_depth_frame10.png" alt="Raw Depth">
                            <p>Raw Depth (L515)</p>
                        </div>
                        <div class="image-item">
                            <img src="figs/compare_depths/canteen_515/output_ep000_camera_0_model_depth_frame10.png" alt="CDM Depth">
                            <p>CDM-L515 Output</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="result-section">
                <h3>Point Cloud Quality Comparison</h3>
                <p style="text-align: center; margin-bottom: 20px; color: #666;">Interactive 3D visualization - Use mouse to rotate, scroll to zoom</p>
                <!-- Camera tracking panel - uncomment to enable camera position tracking -->
                <!--
                <div class="camera-info" id="camera-info" style="text-align: center; margin-bottom: 10px; font-family: monospace; font-size: 12px; background: #f0f0f0; padding: 5px; border-radius: 4px;">
                    <span style="color: #d32f2f; font-weight: bold;">Tracking: Kitchen L515 Raw</span> | 
                    Position: <span id="cam-pos">--</span> | Target: <span id="cam-target">--</span>
                </div>
                -->
                <h4 style="font-size: 1.2rem; margin: 30px 0 20px 0; color: #666; text-align: center;">Kitchen Scene</h4>
                <p style="text-align: center; margin: 0 0 10px 0; color: #888; font-size: 1.2rem;">D435 Camera</p>
                <div class="pcd-grid">
                    <div class="pcd-item">
                        <div id="pcd-viewer-microwave-435-raw" class="pcd-viewer-optimized">
                            <div class="pcd-loading">Initializing viewer...</div>
                        </div>
                        <p>Raw Depth Point Cloud</p>
                    </div>
                    <div class="pcd-item">
                        <div id="pcd-viewer-microwave-435-model" class="pcd-viewer-optimized">
                            <div class="pcd-loading">Initializing viewer...</div>
                        </div>
                        <p>CDM-D435 Output Point Cloud</p>
                    </div>
                </div>
                
                <p style="text-align: center; margin: 15px 0 10px 0; color: #888; font-size: 1.2rem;">L515 Camera</p>
                <div class="pcd-grid">
                    <div class="pcd-item">
                        <div id="pcd-viewer-microwave-515-raw" class="pcd-viewer-optimized">
                            <div class="pcd-loading">Initializing viewer...</div>
                        </div>
                        <p>Raw Depth Point Cloud</p>
                    </div>
                    <div class="pcd-item">
                        <div id="pcd-viewer-microwave-515-model" class="pcd-viewer-optimized">
                            <div class="pcd-loading">Initializing viewer...</div>
                        </div>
                        <p>CDM-L515 Output Point Cloud</p>
                    </div>
                </div>
                
                <h4 style="font-size: 1.2rem; margin: 30px 0 20px 0; color: #666; text-align: center;">Canteen Scene</h4>
                <p style="text-align: center; margin: 0 0 10px 0; color: #888; font-size: 1.2rem;">D435 Camera</p>
                <div class="pcd-grid">
                    <div class="pcd-item">
                        <div id="pcd-viewer-canteen-435-raw" class="pcd-viewer-optimized">
                            <div class="pcd-loading">Initializing viewer...</div>
                        </div>
                        <p>Raw Depth Point Cloud</p>
                    </div>
                    <div class="pcd-item">
                        <div id="pcd-viewer-canteen-435-model" class="pcd-viewer-optimized">
                            <div class="pcd-loading">Initializing viewer...</div>
                        </div>
                        <p>CDM-D435 Output Point Cloud</p>
                    </div>
                </div>
                
                <p style="text-align: center; margin: 15px 0 10px 0; color: #888; font-size: 1.2rem;">L515 Camera</p>
                <div class="pcd-grid">
                    <div class="pcd-item">
                        <div id="pcd-viewer-canteen-515-raw" class="pcd-viewer-optimized">
                            <div class="pcd-loading">Initializing viewer...</div>
                        </div>
                        <p>Raw Depth Point Cloud</p>
                    </div>
                    <div class="pcd-item">
                        <div id="pcd-viewer-canteen-515-model" class="pcd-viewer-optimized">
                            <div class="pcd-loading">Initializing viewer...</div>
                        </div>
                        <p>CDM-L515 Output Point Cloud</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="depth-accuracy">
        <div class="container">
            <h2>Depth Accuracy w.r.t Distance</h2>
            <p>To understand the working range of CDMs and help users effectively use them, we evaluated the depth accuracy of CDMs at various distances on the Hammer dataset. The results show that CDMs achieve high accuracy across different distances, with performance trends following the original camera capabilities while significantly reducing noise and errors.</p>
            
            <div class="accuracy-charts">
                <div class="chart-item">
                    <h4 style="text-align: center; color: #555; margin-bottom: 15px;">D435 - Absolute Relative Error</h4>
                    <div id="d435-absrel-chart" class="plotly-chart"></div>
                </div>
                <div class="chart-item">
                    <h4 style="text-align: center; color: #555; margin-bottom: 15px;">D435 - L1 Error</h4>
                    <div id="d435-l1-chart" class="plotly-chart"></div>
                </div>
                <div class="chart-item">
                    <h4 style="text-align: center; color: #555; margin-bottom: 15px;">L515 - Absolute Relative Error</h4>
                    <div id="l515-absrel-chart" class="plotly-chart"></div>
                </div>
                <div class="chart-item">
                    <h4 style="text-align: center; color: #555; margin-bottom: 15px;">L515 - L1 Error</h4>
                    <div id="l515-l1-chart" class="plotly-chart"></div>
                </div>
            </div>
            
            <div class="accuracy-insights">
                <h3>Key Insights</h3>
                <ul>
                    <li>CDMs maintain high accuracy within the camera's optimal working range (1-4 meters for most sensors)</li>
                    <li>Raw depth often shows larger errors than manufacturer specifications, which CDMs effectively correct</li>
                    <li>CDMs achieve nearly simulation-level accuracy, enabling reliable sim-to-real transfer</li>
                    <li>Performance trends follow the original camera capabilities while significantly reducing noise</li>
                </ul>
            </div>
        </div>
    </section>

    <section class="quantitative-results">
        <div class="container">
            <h2>Quantitative Results</h2>
            
            <div class="table-section">
                <h3>Depth Evaluation on Hammer Dataset (Zero-shot)</h3>
                <div class="table-container">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th rowspan="2">Split</th>
                                <th rowspan="2">Depth Model</th>
                                <th>L1 ‚Üì</th>
                                <th>RMSE ‚Üì</th>
                                <th>AbsRel ‚Üì</th>
                                <th>Œ¥‚ÇÄ.‚ÇÖ ‚Üë</th>
                                <th>Œ¥‚ÇÅ ‚Üë</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="header-row">
                                <td rowspan="7">D435<br>(IR Stereo)</td>
                                <td class="best-result"><strong>CDM-D435 (Ours)</strong></td>
                                <td><strong>0.0258</strong></td>
                                <td><strong>0.0404</strong></td>
                                <td><strong>0.0312</strong></td>
                                <td><strong>0.9842</strong></td>
                                <td><strong>0.9951</strong></td>
                            </tr>
                            <tr>
                                <td class="best-result"><strong>CDM-L515 (Ours)</strong></td>
                                <td><strong>0.0182</strong></td>
                                <td><strong>0.0338</strong></td>
                                <td><strong>0.0217</strong></td>
                                <td><strong>0.9877</strong></td>
                                <td><strong>0.9956</strong></td>
                            </tr>
                            <tr>
                                <td>PromptDA*(435)</td>
                                <td>0.0434</td>
                                <td>0.0666</td>
                                <td>0.0599</td>
                                <td>0.9459</td>
                                <td>0.9770</td>
                            </tr>
                            <tr>
                                <td>PromptDA*(515)</td>
                                <td>0.1830</td>
                                <td>0.2387</td>
                                <td>0.2750</td>
                                <td>0.8802</td>
                                <td>0.9186</td>
                            </tr>
                            <tr>
                                <td>PromptDA</td>
                                <td>0.0396</td>
                                <td>0.0691</td>
                                <td>0.0484</td>
                                <td>0.9503</td>
                                <td>0.9772</td>
                            </tr>
                            <tr>
                                <td>PriorDA</td>
                                <td>0.0388</td>
                                <td>0.0754</td>
                                <td>0.0461</td>
                                <td>0.9632</td>
                                <td>0.9880</td>
                            </tr>
                            <tr>
                                <td>Raw Depth</td>
                                <td>0.0550</td>
                                <td>0.1458</td>
                                <td>0.0708</td>
                                <td>0.9179</td>
                                <td>0.9543</td>
                            </tr>
                            
                            <tr class="header-row">
                                <td rowspan="7">L515<br>(D-ToF)</td>
                                <td class="best-result"><strong>CDM-L515 (Ours)</strong></td>
                                <td><strong>0.0156</strong></td>
                                <td><strong>0.0297</strong></td>
                                <td><strong>0.0229</strong></td>
                                <td><strong>0.9754</strong></td>
                                <td><strong>0.9919</strong></td>
                            </tr>
                            <tr>
                                <td class="best-result"><strong>CDM-D435 (Ours)</strong></td>
                                <td><strong>0.0165</strong></td>
                                <td><strong>0.0349</strong></td>
                                <td><strong>0.0246</strong></td>
                                <td><strong>0.9613</strong></td>
                                <td><strong>0.9855</strong></td>
                            </tr>
                            <tr>
                                <td>PromptDA*(515)</td>
                                <td>0.0235</td>
                                <td>0.0666</td>
                                <td>0.0349</td>
                                <td>0.9291</td>
                                <td>0.9730</td>
                            </tr>
                            <tr>
                                <td>PromptDA*(435)</td>
                                <td>0.0254</td>
                                <td>0.0438</td>
                                <td>0.0379</td>
                                <td>0.9234</td>
                                <td>0.9640</td>
                            </tr>
                            <tr>
                                <td>PromptDA</td>
                                <td>0.0207</td>
                                <td>0.0515</td>
                                <td>0.0304</td>
                                <td>0.9480</td>
                                <td>0.9699</td>
                            </tr>
                            <tr>
                                <td>PriorDA</td>
                                <td>0.0177</td>
                                <td>0.0385</td>
                                <td>0.0274</td>
                                <td>0.9502</td>
                                <td>0.9763</td>
                            </tr>
                            <tr>
                                <td>Raw Depth</td>
                                <td>0.0312</td>
                                <td>0.0813</td>
                                <td>0.0475</td>
                                <td>0.9098</td>
                                <td>0.9429</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="table-section">
                <h3>Sim-to-Real Transfer Results</h3>
                <p>Zero-shot sim-to-real results using CDMs as plugin in real-world robot pipeline</p>
                <div class="table-container">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th rowspan="3">Camera</th>
                                <th rowspan="3">Depth Model</th>
                                <th colspan="4">Kitchen Task</th>
                                <th colspan="6">Canteen Task</th>
                            </tr>
                            <tr>
                                <th>Pick Bowl</th>
                                <th>Put Bowl into Microwave</th>
                                <th>Close Microwave</th>
                                <th>Total</th>
                                <th>Pick Fork</th>
                                <th>Place Fork</th>
                                <th>Pick Plate</th>
                                <th>Dump Plate</th>
                                <th>Place Plate</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td rowspan="5">D435</td><td>None</td><td>0/30</td><td>0/30</td><td>0/30</td><td>0/30</td><td>0/30</td><td>0/30</td><td>0/30</td><td>0/30</td><td>0/30</td><td>0/30</td></tr>
                            <tr><td>PromptDA</td><td>11/30</td><td>5/30</td><td>0/30</td><td>0/30</td><td>17/30</td><td>16/30</td><td>7/30</td><td>2/30</td><td>6/30</td><td>1/30</td></tr>
                            <tr><td>PriorDA</td><td>16/30</td><td>8/30</td><td>7/30</td><td>7/30</td><td><strong>30/30</strong></td><td><strong>30/30</strong></td><td>1/30</td><td>0/30</td><td>0/30</td><td>0/30</td></tr>
                            <tr class="best-result"><td><strong>CDM-D435</strong></td><td><strong>29/30</strong></td><td><strong>26/30</strong></td><td><strong>26/30</strong></td><td><strong>26/30</strong></td><td><strong>30/30</strong></td><td><strong>30/30</strong></td><td><strong>15/30</strong></td><td><strong>14/30</strong></td><td><strong>14/30</strong></td><td><strong>14/30</strong></td></tr>
                            <tr class="best-result"><td>CDM-L515</td><td><strong>29/30</strong></td><td>22/30</td><td>16/30</td><td>14/30</td><td><strong>30/30</strong></td><td>29/30</td><td>0/30</td><td>0/30</td><td>0/30</td><td>0/30</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="figure-section">
                <h3>Real-World Depth-Only Imitation Learning</h3>
                <div class="imitation-results-grid">
                    <div class="table-item">
                        <div class="imitation-table-container">
                            <table class="imitation-table">
                                <thead>
                                    <tr>
                                        <th rowspan="3">Depth Model</th>
                                        <th colspan="2">Toothpaste-and-Cup</th>
                                        <th colspan="2">Stack-Bowls</th>
                                    </tr>
                                    <tr>
                                        <th>Pick Toothpaste</th>
                                        <th>Put Toothpaste into Cup</th>
                                        <th>Pick Bowl</th>
                                        <th>Stack Bowl</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>None</td>
                                        <td>0/15</td>
                                        <td>0/15</td>
                                        <td>6/15</td>
                                        <td>3/15</td>
                                    </tr>
                                    <tr class="best-result">
                                        <td><strong>CDM-D435</strong></td>
                                        <td><strong>10/15</strong></td>
                                        <td><strong>6/15</strong></td>
                                        <td><strong>11/15</strong></td>
                                        <td><strong>9/15</strong></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <h4>Results w/w.o CDM</h4>
                        <p>50 demonstrations for each task, collected by teleoperation</p>
                    </div>
                    <div class="figure-item">
                        <h4>Generalization Over Different Object Sizes</h4>
                        <p>The policy trained without CDM cannot generalize to unseen sizes, while CDM-enhanced policies show better generalization.</p>
                        <img src="figs/success-rate-hist.png" alt="Success Rate Histogram">
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="setup">
        <div class="container">
            <h2>UR5 Manipulation Experiment Setup</h2>
            <p class="setup-description">Complete experimental setup for simulation and real-world experiments with two different cameras (D435 and L515) and training environments for kitchen and canteen tasks.</p>
            
            <div class="setup-row">
                <div class="setup-item-exp">
                    <img src="figs/ur5-setup-sim.png" alt="Overall setup (sim)">
                    <h4>Overall Setup (Simulation)</h4>
                    <p>Simulation environment with camera pose randomization for demonstration generation</p>
                </div>
                <div class="setup-item-exp">
                    <img src="figs/sim-range-microwave.png" alt="Kitchen task randomization (sim)">
                    <h4>Kitchen Task Randomization (Sim)</h4>
                    <p>Training environment with randomization boundaries for bowl and microwave positions</p>
                </div>
                <div class="setup-item-exp">
                    <img src="figs/sim-range-plate.png" alt="Canteen task randomization (sim)">
                    <h4>Canteen Task Randomization (Sim)</h4>
                    <p>Simulation environment for canteen task with object placement randomization</p>
                </div>
            </div>
            
            <div class="setup-row">
                <div class="setup-item-exp">
                    <img src="figs/ur5-setup.png" alt="Overall setup (real)">
                    <h4>Overall Setup (Real)</h4>
                    <p>Real-world UR5 robot setup with third-view depth camera for manipulation tasks</p>
                </div>
                <div class="setup-item-exp">
                    <img src="figs/kitchen-distribution.png" alt="Kitchen task distribution (real)">
                    <h4>Kitchen Task Distribution (Real)</h4>
                    <p>Test distribution following simulation randomization boundaries for real-world experiments</p>
                </div>
                <div class="setup-item-exp">
                    <img src="figs/canteen-distribution.png" alt="Canteen task distribution (real)">
                    <h4>Canteen Task Distribution (Real)</h4>
                    <p>Real-world test distribution matching simulation randomization for canteen experiments</p>
                </div>
            </div>
        </div>
    </section>

    <section class="method">
        <div class="container">
            <h2>Method Overview</h2>
            <div class="method-grid">
                <div class="method-item">
                    <img src="figs/camera_depth_model.png" alt="Camera Depth Model">
                    <h3>Camera Depth Models (CDMs)</h3>
                    <p>CDMs process RGB images and noisy depth signals from specific depth cameras to produce high-quality, denoised metric depth.</p>
                </div>
                <div class="method-item">
                    <img src="figs/noise-model.png" alt="Noise Model">
                    <h3>Neural Data Engine</h3>
                    <p>We model depth camera noise patterns to generate high-quality paired data from simulation for training CDMs.</p>
                </div>
            </div>
        </div>
    </section>


    <section class="citation">
        <div class="container">
            <h2>Citation</h2>
            <pre><code>@article{liu2024manipulation,
  title={Manipulation as in Simulation: Enabling Accurate Geometry Perception in Robots},
  author={Liu, Minghuan and Zhu, Zhengbang and Han, Xiaoshen and Hu, Peng and Lin, Haotong and 
          Li, Xinyao and Chen, Jingxiao and Xu, Jiafeng and Yang, Yichu and Lin, Yunfeng and 
          Li, Xinghang and Yu, Yong and Zhang, Weinan and Kong, Tao and Kang, Bingyi},
  journal={arXiv preprint},
  year={2024}
}</code></pre>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>¬© 2024 ByteDance Seed. All rights reserved.</p>
            <p>Correspondence: <a href="mailto:ericliuof97@gmail.com">Minghuan Liu</a>, <a href="mailto:bingyikang@bytedance.com">Bingyi Kang</a></p>
        </div>
    </footer>

    <script>
        // Optimized Point Cloud Viewer for 90k+ points
        class OptimizedPointCloudViewer {
            constructor(containerId, plyPath, isL515 = false) {
                this.container = document.getElementById(containerId);
                this.plyPath = plyPath;
                this.currentLOD = null;
                this.isLoading = true;
                this.isL515 = isL515; // Flag to use different camera settings for L515
                
                // Point cloud visualization settings
                this.pointSize = 0.02; // Adjust this value to change point size
                
                this.init();
            }

            init() {
                if (!this.container) return;

                // Scene setup
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0xf5f5f5);

                // Camera setup
                this.camera = new THREE.PerspectiveCamera(
                    45,
                    this.container.clientWidth / this.container.clientHeight,
                    0.1,
                    1000
                );
                
                // Set camera position based on camera type
                if (this.isL515) {
                    // L515 camera position
                    this.camera.position.set(0.550, 0.760, 2.161);
                } else {
                    // D435 camera position (original)
                    this.camera.position.set(-0.041, 1.196, 1.983);
                }
                
                // Set the up vector to ensure correct orientation
                this.camera.up.set(0, 1, 0);

                // Optimized renderer
                this.renderer = new THREE.WebGLRenderer({ 
                    antialias: false, // Disable for better performance
                    powerPreference: "high-performance"
                });
                this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);
                this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5)); // Limit pixel ratio
                this.container.appendChild(this.renderer.domElement);

                // Controls with free rotation
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.screenSpacePanning = false;
                this.controls.minDistance = 0.5;
                this.controls.maxDistance = 10;
                
                // Set target based on camera type
                if (this.isL515) {
                    // L515 target
                    this.controls.target.set(-0.027, -0.351, -0.020);
                } else {
                    // D435 target (original)
                    this.controls.target.set(-0.034, -0.351, 0);
                }
                this.controls.update();

                // Simple lighting
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
                this.scene.add(ambientLight);

                // Load point cloud with LOD
                this.loadPointCloud();

                // Start render loop
                this.animate();

                // Handle resize
                window.addEventListener('resize', () => this.handleResize());
            }

            loadPointCloud() {
                const loadingDiv = this.container.querySelector('.pcd-loading');
                if (loadingDiv) {
                    loadingDiv.textContent = 'Loading point cloud...';
                }

                const loader = new THREE.PLYLoader();
                
                loader.load(
                    this.plyPath,
                    (geometry) => this.onGeometryLoaded(geometry),
                    (xhr) => {
                        if (xhr.lengthComputable && loadingDiv) {
                            const percentComplete = (xhr.loaded / xhr.total) * 100;
                            loadingDiv.textContent = `Loading: ${Math.round(percentComplete)}%`;
                        }
                    },
                    (error) => {
                        console.error('Error loading PLY:', error);
                        if (loadingDiv) {
                            loadingDiv.textContent = 'Failed to load. Please run a local server.';
                        }
                    }
                );
            }

            onGeometryLoaded(geometry) {
                const loadingDiv = this.container.querySelector('.pcd-loading');
                if (loadingDiv) {
                    loadingDiv.style.display = 'none';
                }

                // Convert from Blender's Z-up to Three.js Y-up coordinate system
                // Rotate -90 degrees around X axis to swap Y and Z
                geometry.rotateX(-Math.PI / 2);

                // Center and scale
                geometry.computeBoundingBox();
                geometry.center();
                const size = new THREE.Vector3();
                geometry.boundingBox.getSize(size);
                const scale = 2 / Math.max(size.x, size.y, size.z);
                geometry.scale(scale, scale, scale);

                // Create point cloud with all points (highest quality)
                this.currentLOD = this.createPointCloud(geometry, 1.0);
                this.scene.add(this.currentLOD);
                
                this.isLoading = false;
            }


            createPointCloud(geometry, pointSize) {
                // Add colors if not present
                if (!geometry.attributes.color) {
                    const positions = geometry.attributes.position.array;
                    const pointCount = positions.length / 3;
                    const colors = new Float32Array(pointCount * 3);
                    
                    for (let i = 0; i < pointCount; i++) {
                        const y = positions[i * 3 + 1];
                        const t = (y + 1) * 0.5;
                        colors[i * 3] = 0.1 + t * 0.3;
                        colors[i * 3 + 1] = 0.4 + t * 0.4;
                        colors[i * 3 + 2] = 0.8;
                    }
                    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
                }

                const material = new THREE.PointsMaterial({
                    size: this.pointSize,
                    vertexColors: true,
                    sizeAttenuation: true
                });

                return new THREE.Points(geometry, material);
            }

            animate() {
                requestAnimationFrame(() => this.animate());

                // Always render for smooth interaction
                this.renderer.render(this.scene, this.camera);
                
                // Update camera info display (comment out for performance when not tracking)
                // this.updateCameraInfo();
            }
            
            updateCameraInfo() {
                // Only update camera info if this is the tracked viewer
                if (window.trackedViewer === this) {
                    const pos = this.camera.position;
                    const target = this.controls.target;
                    
                    const posElement = document.getElementById('cam-pos');
                    const targetElement = document.getElementById('cam-target');
                    
                    if (posElement) {
                        posElement.textContent = `(${pos.x.toFixed(3)}, ${pos.y.toFixed(3)}, ${pos.z.toFixed(3)})`;
                    }
                    if (targetElement) {
                        targetElement.textContent = `(${target.x.toFixed(3)}, ${target.y.toFixed(3)}, ${target.z.toFixed(3)})`;
                    }
                }
            }

            handleResize() {
                this.camera.aspect = this.container.clientWidth / this.container.clientHeight;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);
            }
        }

        // Initialize viewers when page loads
        window.addEventListener('DOMContentLoaded', function() {
            // Check if running locally
            const isLocal = window.location.protocol === 'file:';
            
            if (isLocal) {
                document.querySelectorAll('.pcd-loading').forEach(div => {
                    div.innerHTML = `
                        <div style="text-align: center; padding: 20px;">
                            <p>To view interactive point clouds:</p>
                            <p style="font-size: 12px;">Run: <code>python3 -m http.server 8000</code></p>
                            <p style="font-size: 12px;">Visit: <code>http://localhost:8000</code></p>
                        </div>
                    `;
                });
                return;
            }

            // Create viewers for Kitchen Scene - D435
            const viewer1 = new OptimizedPointCloudViewer('pcd-viewer-microwave-435-raw', 'pcds/microwave_435_raw_depth.ply', false);
            const viewer2 = new OptimizedPointCloudViewer('pcd-viewer-microwave-435-model', 'pcds/microwave_435_model_depth.ply', false);
            
            // Create viewers for Kitchen Scene - L515
            const viewer3 = new OptimizedPointCloudViewer('pcd-viewer-microwave-515-raw', 'pcds/microwave_515_raw_depth.ply', true);
            const viewer4 = new OptimizedPointCloudViewer('pcd-viewer-microwave-515-model', 'pcds/microwave_515_model_depth.ply', true);
            
            // Create viewers for Canteen Scene - D435
            const viewer5 = new OptimizedPointCloudViewer('pcd-viewer-canteen-435-raw', 'pcds/canteen_435_raw_depth.ply', false);
            const viewer6 = new OptimizedPointCloudViewer('pcd-viewer-canteen-435-model', 'pcds/canteen_435_model_depth.ply', false);
            
            // Create viewers for Canteen Scene - L515
            const viewer7 = new OptimizedPointCloudViewer('pcd-viewer-canteen-515-raw', 'pcds/canteen_515_raw_depth.ply', true);
            const viewer8 = new OptimizedPointCloudViewer('pcd-viewer-canteen-515-model', 'pcds/canteen_515_model_depth.ply', true);
            
            // Camera tracking - uncomment to track a specific viewer
            // window.trackedViewer = viewer3; // Track L515 viewer (microwave_515_raw)
            
            // Initialize charts after Plotly is loaded
            if (typeof Plotly !== 'undefined') {
                initDepthAccuracyCharts();
            } else {
                // Wait for Plotly to load
                const checkPlotly = setInterval(() => {
                    if (typeof Plotly !== 'undefined') {
                        clearInterval(checkPlotly);
                        initDepthAccuracyCharts();
                    }
                }, 100);
            }
        });
        
        // Function to create interactive depth accuracy charts
        function initDepthAccuracyCharts() {
            // Chart configuration - no zoom, pan, or modebar
            const config = {
                displayModeBar: false,  // Hide all toolbar buttons
                responsive: true,       // Auto-resize with window
                staticPlot: false      // Keep hover enabled
            };
            
            // Common layout settings
            const commonLayout = {
                font: { 
                    family: 'ByteSans, Roboto, sans-serif',
                    size: 14,
                    color: '#444'
                },
                margin: { l: 70, r: 40, t: 40, b: 60 },
                hovermode: 'x unified',
                dragmode: false,       // Disable dragging
                scrollZoom: false,     // Disable scroll zoom
                doubleClick: false,    // Disable double-click reset
                showlegend: true,
                legend: {
                    x: 0.02,
                    y: 0.98,
                    bgcolor: 'rgba(255, 255, 255, 0.95)',
                    bordercolor: '#16213e',
                    borderwidth: 1,
                    font: {
                        size: 12,
                        color: '#555'
                    }
                },
                xaxis: {
                    title: {
                        text: 'Distance (m)',
                        font: {
                            size: 13,
                            color: '#555'
                        }
                    },
                    gridcolor: '#e5e5e5',
                    gridwidth: 1,
                    zeroline: true,
                    zerolinecolor: '#ddd',
                    zerolinewidth: 2,
                    linecolor: '#16213e',
                    linewidth: 2,
                    tickfont: {
                        size: 12,
                        color: '#666'
                    },
                    range: [0.5, 4.5]
                },
                plot_bgcolor: '#fafbfc',
                paper_bgcolor: 'white',
                hoverlabel: {
                    bgcolor: '#16213e',
                    font: {
                        family: 'ByteSans, Roboto, sans-serif',
                        size: 12,
                        color: 'white'
                    },
                    bordercolor: '#16213e'
                }
            };
            
            // Sample data - replace with your actual experimental data
            const distances = [0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5];
            
            // D435 Data (example values - replace with actual data)
            const d435_raw_absrel = [0.072, 0.068, 0.065, 0.070, 0.075, 0.082, 0.091, 0.105, 0.118];
            const d435_cdm_absrel = [0.031, 0.028, 0.027, 0.029, 0.031, 0.034, 0.037, 0.041, 0.045];
            
            const d435_raw_l1 = [0.058, 0.054, 0.052, 0.055, 0.059, 0.065, 0.072, 0.082, 0.095];
            const d435_cdm_l1 = [0.026, 0.024, 0.023, 0.024, 0.026, 0.028, 0.031, 0.035, 0.039];
            
            // L515 Data (example values - replace with actual data)
            const l515_raw_absrel = [0.048, 0.045, 0.044, 0.047, 0.051, 0.056, 0.062, 0.070, 0.079];
            const l515_cdm_absrel = [0.023, 0.021, 0.020, 0.022, 0.024, 0.026, 0.029, 0.032, 0.036];
            
            const l515_raw_l1 = [0.032, 0.030, 0.029, 0.031, 0.033, 0.036, 0.040, 0.045, 0.051];
            const l515_cdm_l1 = [0.016, 0.015, 0.014, 0.015, 0.016, 0.017, 0.019, 0.021, 0.024];
            
            // Create D435 Absolute Relative Error Chart
            const d435AbsRelData = [
                {
                    x: distances,
                    y: d435_raw_absrel,
                    name: 'Raw Depth',
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: '#e74c3c', width: 2.5 },
                    marker: { size: 7, opacity: 0.9 }
                },
                {
                    x: distances,
                    y: d435_cdm_absrel,
                    name: 'CDM-D435',
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: '#16213e', width: 2.5 },
                    marker: { size: 7, opacity: 0.9 }
                }
            ];
            
            const d435AbsRelLayout = {
                ...commonLayout,
                yaxis: {
                    title: {
                        text: 'Absolute Relative Error',
                        font: {
                            size: 13,
                            color: '#555'
                        }
                    },
                    gridcolor: '#e5e5e5',
                    gridwidth: 1,
                    zeroline: true,
                    zerolinecolor: '#ddd',
                    zerolinewidth: 2,
                    linecolor: '#16213e',
                    linewidth: 2,
                    tickfont: {
                        size: 12,
                        color: '#666'
                    },
                    range: [0, 0.15]
                }
            };
            
            Plotly.newPlot('d435-absrel-chart', d435AbsRelData, d435AbsRelLayout, config);
            
            // Create D435 L1 Error Chart
            const d435L1Data = [
                {
                    x: distances,
                    y: d435_raw_l1,
                    name: 'Raw Depth',
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: '#e74c3c', width: 2.5 },
                    marker: { size: 7, opacity: 0.9 }
                },
                {
                    x: distances,
                    y: d435_cdm_l1,
                    name: 'CDM-D435',
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: '#16213e', width: 2.5 },
                    marker: { size: 7, opacity: 0.9 }
                }
            ];
            
            const d435L1Layout = {
                ...commonLayout,
                yaxis: {
                    title: {
                        text: 'L1 Error (m)',
                        font: {
                            size: 13,
                            color: '#555'
                        }
                    },
                    gridcolor: '#e5e5e5',
                    gridwidth: 1,
                    zeroline: true,
                    zerolinecolor: '#ddd',
                    zerolinewidth: 2,
                    linecolor: '#16213e',
                    linewidth: 2,
                    tickfont: {
                        size: 12,
                        color: '#666'
                    },
                    range: [0, 0.12]
                }
            };
            
            Plotly.newPlot('d435-l1-chart', d435L1Data, d435L1Layout, config);
            
            // Create L515 Absolute Relative Error Chart
            const l515AbsRelData = [
                {
                    x: distances,
                    y: l515_raw_absrel,
                    name: 'Raw Depth',
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: '#e74c3c', width: 2.5 },
                    marker: { size: 7, opacity: 0.9 }
                },
                {
                    x: distances,
                    y: l515_cdm_absrel,
                    name: 'CDM-L515',
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: '#27ae60', width: 2.5 },
                    marker: { size: 7, opacity: 0.9 }
                }
            ];
            
            const l515AbsRelLayout = {
                ...commonLayout,
                yaxis: {
                    title: {
                        text: 'Absolute Relative Error',
                        font: {
                            size: 13,
                            color: '#555'
                        }
                    },
                    gridcolor: '#e5e5e5',
                    gridwidth: 1,
                    zeroline: true,
                    zerolinecolor: '#ddd',
                    zerolinewidth: 2,
                    linecolor: '#16213e',
                    linewidth: 2,
                    tickfont: {
                        size: 12,
                        color: '#666'
                    },
                    range: [0, 0.1]
                }
            };
            
            Plotly.newPlot('l515-absrel-chart', l515AbsRelData, l515AbsRelLayout, config);
            
            // Create L515 L1 Error Chart
            const l515L1Data = [
                {
                    x: distances,
                    y: l515_raw_l1,
                    name: 'Raw Depth',
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: '#e74c3c', width: 2.5 },
                    marker: { size: 7, opacity: 0.9 }
                },
                {
                    x: distances,
                    y: l515_cdm_l1,
                    name: 'CDM-L515',
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: '#27ae60', width: 2.5 },
                    marker: { size: 7, opacity: 0.9 }
                }
            ];
            
            const l515L1Layout = {
                ...commonLayout,
                yaxis: {
                    title: {
                        text: 'L1 Error (m)',
                        font: {
                            size: 13,
                            color: '#555'
                        }
                    },
                    gridcolor: '#e5e5e5',
                    gridwidth: 1,
                    zeroline: true,
                    zerolinecolor: '#ddd',
                    zerolinewidth: 2,
                    linecolor: '#16213e',
                    linewidth: 2,
                    tickfont: {
                        size: 12,
                        color: '#666'
                    },
                    range: [0, 0.06]
                }
            };
            
            Plotly.newPlot('l515-l1-chart', l515L1Data, l515L1Layout, config);
        }
    </script>
</body>
</html>